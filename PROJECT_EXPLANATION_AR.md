# ุงูุฏููู ุงูุดุงูู ููุดุฑูุน ุงููุณุงุนุฏ ุงูุฐูู ููุญุฑู ุงูุฌุงูุนู (Smart Campus Assistant) ๐๐ก

ูุฐุง ุงููุณุชูุฏ ูุดุฑุญ ุจุงูุชูุตูู ุงูููู ููู ูุนูู ูู ุฌุฒุก ูู ุงููุดุฑูุนุ ูู ุงูุจููุฉ ุงูุชุญุชูุฉ ุฅูู ุฃุตุบุฑ ููุฏ ูู ุงููุงุฌูุฉ. ุชู ุฅุนุฏุงุฏู ููููู ุฏูููุงู ูุฑุฌุนูุงู ูู ูุทุงูุจ ูููู "ููู ุชู ุตูุน ูุฐุง".

---

## ๐๏ธ 1. ุงูููุฏุณุฉ ุงูุนุงูุฉ ูููุดุฑูุน (Architecture)
ุงููุดุฑูุน ูุจูู ุจููุท **Monorepo**ุ ููุง ูุนูู ุฃู ุงูููุฏ ุงูุฎุงุต ุจุงููุงุฌูุฉ (Frontend) ูุงูุฎุงุฏู (Backend) ููุฌูุฏุงู ูู ููุณ ุงููุฌูุฏ ููููููุง ูุนููุงู ุจุดูู ูููุตู ููุชูุงูู.

### **ุงูููููุงุช ุงูุฑุฆูุณูุฉ:**
1.  **Frontend (ุงููุงุฌูุฉ):** ูุจููุฉ ุจุงุณุชุฎุฏุงู **React** ู **Vite**. ูู ูุง ูุฑุงู ุงููุณุชุฎุฏู ูู ุงููุชุตูุญ.
2.  **Backend (ุงูุฎุงุฏู):** ูุจูู ุจุงุณุชุฎุฏุงู **Node.js** ู **Express**. ูู ุงููุณุคูู ุนู ูุนุงูุฌุฉ ุงูุจูุงูุงุช ูุงูููุทู.
3.  **Database (ูุงุนุฏุฉ ุงูุจูุงูุงุช):** ูุณุชุฎุฏู **PostgreSQL** ูุญูุธ ุงูุจูุงูุงุชุ ููุชุนุงูู ูุนูุง ุนุจุฑ **Prisma ORM**.
4.  **Real-time (ุงูููุช ุงููุนูู):** ูุณุชุฎุฏู **Socket.io** ูุฅุฑุณุงู ุงูุจูุงูุงุช ููุฑุงู ุจูู ุงููุณุชุฎุฏููู (ูุซู ุจุฏุก ุงููุญุงุถุฑุฉ).

---

## ๐ 2. ุงูุฃูุงู ููุธุงู ุชุณุฌูู ุงูุฏุฎูู (Security & Auth)
ูุฐุง ูู ุงูุฌุฒุก ุงูุฃูุซุฑ ุชุนููุฏุงู ูุฃูููุฉ. ููู ูุถูู ุฃู ุงููุณุชุฎุฏู ูู ูุนูุงู ูู ูุฏุนูุ

### **ุฏูุฑุฉ ุญูุงุฉ ุชุณุฌูู ุงูุฏุฎูู (The Login Flow): ๐**
1.  **ุงูุทุงูุจ:** ููุชุจ ุงูุฑูู ุงูุฌุงูุนู ููููุฉ ุงููุฑูุฑ ูู ุตูุญุฉ `Login.tsx`.
2.  **Frontend:** ูุณุชุฏุนู ุฏุงูุฉ `login` ุงูููุฌูุฏุฉ ูู `AuthContext.tsx`. ูุฐู ุงูุฏุงูุฉ ุชุฑุณู ุทูุจ HTTP `POST` ุฅูู ุงูุณูุฑูุฑ.
3.  **Backend:**
    -   ูุณุชูุจู ุงูุทูุจ ูู `auth.controller.ts`.
    -   ูุชุญูู ูู ุตุญุฉ ูููุฉ ุงููุฑูุฑ (ุจุงุณุชุฎุฏุงู ุงูุชุดููุฑ `bcrypt`).
    -   ุฅุฐุง ูุงูุช ุตุญูุญุฉุ ูููู ุจุฅูุดุงุก **ุดูุฑุชูู (Tokens)**:
        -   **Access Token:** ุดูุฑุฉ ูุตูุฑุฉ ุงูุนูุฑ (ูุซูุงู 15 ุฏูููุฉ) ุชุณุชุฎุฏู ูู ูู ุทูุจ ูุฅุซุจุงุช ุงููููุฉ.
        -   **Refresh Token:** ุดูุฑุฉ ุทูููุฉ ุงูุนูุฑ (7 ุฃูุงู) ุชูุฎุฒู ุจุฃูุงู ูู **HTTP-Only Cookie** (ูุง ูููู ูู JavaScript ุงููุตูู ุฅูููุงุ ููุง ูุญูู ูู ุณุฑูุฉ ุงููููุฉ XSS).
4.  **ุงูุฑุฏ (Response):** ุงูุณูุฑูุฑ ูุฑุณู ุงูู Access Token ูููุงุฌูุฉุ ููุถุน ุงูู Refresh Token ูู ุงูููููุฒ.
5.  **Frontend:** ูุญูุธ ุงูู Access Token ูู ุงูุฐุงูุฑุฉ (ุฃู LocalStorage ูุคูุชุงู) ููุณุชุฎุฏูู ูู ูู ุทูุจ ูุงุญู.

### **ุญูุงูุฉ ุงููุงุฌูุฉ (Frontend Protection): ๐ก๏ธ**
-   ูุณุชุฎุฏู ูููู `ProtectedRoute.tsx`. ูุฐุง ุงููููู ูุบูู ุงูุตูุญุงุช ุงููููุฉ (ูุซู ููุญุฉ ุงูุชุญูู).
-   ุฅุฐุง ุญุงูู ูุณุชุฎุฏู ุบูุฑ ูุณุฌู ุงูุฏุฎูู ูุชุญ ุงูุตูุญุฉุ ูุทุฑุฏู ููุฑุงู ุฅูู ุตูุญุฉ ุงูุฏุฎูู.
-   ูุณุชุฎุฏู `RoutePreloader` ูุชุญููู ุงูุตูุญุงุช ุงููููุฉ ูุณุจูุงู ูุฌุนู ุงูุชููู ุณุฑูุนุงู ุฌุฏุงู.

### **ุญูุงูุฉ ุงูุฎุงุฏู (Backend Protection): ๐ก๏ธ**
-   **Middleware (`auth.middleware.ts`):** ูู "ุงูุญุงุฑุณ" ุงูุฐู ููู ุฃูุงู ูู ุฑุงุจุท (Route).
    -   ููุญุต ูู ุงูุทูุจ ูุญุชูู ุนูู `Authorization Header`ุ
    -   ูู ุงูู Token ุตุงูุญ ููู ููุชูู ููุชูุ
    -   ูู ุงููุณุชุฎุฏู ูุฏูู ุงูุตูุงุญูุฉ (Role) ุงูููุงุณุจุฉ (ุทุงูุจ ุฃู ุฏูุชูุฑ)ุ
-   **Rate Limiting:** ูุธุงู ูููุน ุงููุฌูู ุนูู ุงูุณูุฑูุฑ (DDoS) ุนู ุทุฑูู ุชุญุฏูุฏ ุนุฏุฏ ุงูุทูุจุงุช ุงููุณููุญุฉ ููู ูุณุชุฎุฏู ูู ุงูุฏูููุฉ.
-   **Helmet:** ูุถูู ุชุฑููุณุงุช (Headers) ุฃูููุฉ ููุฑุฏูุฏ ูููุน ุฃููุงุน ูุฎุชููุฉ ูู ุงููุฌูุงุช.

---

## โก 3. ุงูุงุชุตุงู ูู ุงูููุช ุงููุนูู (Real-time with Socket.io)
ููู ูุนุฑู ุงูุทุงูุจ ุฃู ุงููุญุงุถุฑุฉ ุจุฏุฃุช ููุฑุงู ุฏูู ุชุญุฏูุซ ุงูุตูุญุฉุ

1.  **ุงูุงุชุตุงู (Connection):**
    -   ุนูุฏูุง ููุชุญ ุงูุทุงูุจ ุงูุชุทุจููุ ูุชู ุฅูุดุงุก ุงุชุตุงู ููุชูุญ (Socket Connection) ูุน ุงูุณูุฑูุฑ.
    -   ุงูุณูุฑูุฑ ูุทูุจ ูู ุงูุทุงูุจ ุฅุซุจุงุช ูููุชู (Authentication) ููุฑ ุงูุงุชุตุงู.
2.  **ุงูุบุฑู (Rooms):**
    -   ุงูุณูุฑูุฑ ูุถุน ุงูุทุงูุจ ูู "ุบุฑู" ุงูุชุฑุงุถูุฉ:
        -   `user:123`: ุบุฑูุฉ ุฎุงุตุฉ ุจู ูุฅุฑุณุงู ุชูุจููุงุช ุดุฎุตูุฉ.
        -   `role:student`: ุบุฑูุฉ ููู ุงูุทูุงุจ ูุฅุฑุณุงู ุฅุนูุงูุงุช ุนุงูุฉ.
        -   `session:456`: ุบุฑูุฉ ููุญุงุถุฑุฉ ูุนููุฉ ุงูุถู ุฅูููุง.
3.  **ุงูุฃุญุฏุงุซ (Events):**
    -   ุนูุฏูุง ูุถุบุท ุงูุฏูุชูุฑ ุฒุฑ "ุจุฏุก ุงูุญุถูุฑ"ุ ูุฑุณู ุญุฏุซ `session:started`.
    -   ุงูุณูุฑูุฑ ูุณุชูุจู ุงูุญุฏุซ ููุนูุฏ ุจุซู (Broadcast) ููู ุงูุทูุงุจ ุงูููุฌูุฏูู ูู ุบุฑูุฉ ุชูู ุงููุญุงุถุฑุฉ.
    -   ุดุงุดุฉ ุงูุทุงูุจ ุชุณุชูุจู ุงูุญุฏุซ ูุชุธูุฑ ุฒุฑ "ุชุณุฌูู ุงูุญุถูุฑ" ููุฑุงู.

---

## ๐๏ธ 4. ุงูุชุนุงูู ูุน ุงูุจูุงูุงุช (Prisma & Database)
ูุณุชุฎุฏู **Prisma** ูุทุจูุฉ ูุณูุทุฉ ุจูู ุงูููุฏ ููุงุนุฏุฉ ุงูุจูุงูุงุช.

### **ุงูุนูุงูุงุช (Relationships):**
ุฃูุธุฑ ูููู `schema.prisma`. ุงูุจูุงูุงุช ูุชุฑุงุจุทุฉ ุจุฐูุงุก:
-   **User:** ููุซู ุงูุทุงูุจ ุฃู ุงูุฏูุชูุฑ.
-   **Course:** ุงููุงุฏุฉ ุงูุฏุฑุงุณูุฉ.
-   **Enrollment:** ุฌุฏูู ูุณูุท ูุฑุจุท ุงูุทุงูุจ ุจุงููุงุฏุฉ (Many-to-Many).
-   **AttendanceRecord:** ุณุฌู ุงูุญุถูุฑุ ูุฑุชุจุท ุจู (ุงูุทุงูุจ) ู (ุงููุญุงุถุฑุฉ).

**ูุซุงู ุนููู:**
ุนูุฏูุง ูุฑูุฏ ุฌูุจ "ููุงุฏ ุงูุทุงูุจ"ุ ูุง ููุชุจ SQL ูุนูุฏ. ููุชุจ ุจุจุณุงุทุฉ ูู Prisma:
```typescript
prisma.user.findUnique({
  where: { id: studentId },
  include: { enrollments: { include: { course: true } } }
})
```
ูุฐุง ุงูููุฏ ูุฌูุจ ุงูุทุงูุจุ ููุชูุณุน ููุฌูุจ ุชุณุฌููุงุชูุ ููููุง ูุฌูุจ ุชูุงุตูู ุงูููุงุฏ. ุจุณูุท ุฌุฏุงู!

---

## ๐จ 5. ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend Details)
### **ุฅุฏุงุฑุฉ ุงูุญุงูุฉ (State Management):**
-   ูุณุชุฎุฏู **Context API** (`AuthContext`) ููุจูุงูุงุช ุงูุนุงูุฉ ูุซู "ูู ูู ุงููุณุชุฎุฏู ุงูุญุงููุ".
-   ูุณุชุฎุฏู **React Query** (`useQuery`) ูุฌูุจ ุงูุจูุงูุงุช ูู ุงูุณูุฑูุฑ. ููุงุฐุงุ
    -   ูุฃูู ูููู ุจู **Caching** (ุชุฎุฒูู ูุคูุช) ููุจูุงูุงุช. ุฅุฐุง ูุชุญุช ุงูุฌุฏูู ุงูุฏุฑุงุณู ุซู ุนุฏุช ุฅููู ูุงุญูุงูุ ุณูุธูุฑ ููุฑุงู ุฏูู ุงูุชุธุงุฑ ุงูุชุญููู ูุฑุฉ ุฃุฎุฑู.

### **ุงูููููุงุช (Components):**
-   ุงููุดุฑูุน ููุณู ูููููุงุช ุตุบูุฑุฉ ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู ูู ูุฌูุฏ `components`.
-   ูุซูุงู `Navbar`ุ `Sidebar`ุ ู `Card` ูู ููููุงุช ุชูุณุชุฎุฏู ูู ูู ููุงู. ูุฐุง ูุณูู ุงูุตูุงูุฉุ ุฅุฐุง ุฃุฑุฏุช ุชุนุฏูู ุดูู "ุงูุจุทุงูุฉ"ุ ุชุนุฏููุง ูู ููุงู ูุงุญุฏ ููุท.

---

## ๐ค 6. ุงูุฐูุงุก ุงูุงุตุทูุงุนู (AI Integration)
ููู ูุนูู ุงููุณุงุนุฏ ุงูุฐููุ
1.  ูุฃุฎุฐ ุณุคุงู ุงูุทุงูุจ.
2.  (ุฎุทูุฉ ุฐููุฉ ๐ง): ุงูุฎุงุฏู ูุจุญุซ ุฃููุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนู ุณูุงู ุงูุณุคุงู (Context). ูู ูุณุฃู ุนู "ููุนุฏ ูุญุงุถุฑุชู ุงููุงุฏูุฉ"ุ ุฅุฐุงู ูุฌูุจ ุงูุฌุฏูู ุงูุฏุฑุงุณู.
3.  ูุฑุณู ุงูุณุคุงู + ุงูุฌุฏูู ุงูุฏุฑุงุณู ุฅูู **OpenAI API**.
4.  ูุทูุจ ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงูุฅุฌุงุจุฉ ุจูุงุกู ุนูู ูุฐู ุงููุนูููุงุชุ ููุนุทู ุฅุฌุงุจุฉ ุฏูููุฉ ููุฎุตุตุฉ ููุทุงูุจ.

---

## ๐ ููุฎุต ููุชูููุงุช (Tech Stack Summary)
| ุงูุชูููุฉ | ุงุณุชุฎุฏุงููุง | ููุงุฐุง ุงุฎุชุฑูุงูุงุ |
| :--- | :--- | :--- |
| **React** | ุจูุงุก ุงููุงุฌูุฉ | ุณุฑูุนุฉ ุฌุฏุงู ูุชุณูุญ ุจุจูุงุก ุตูุญุงุช ุชูุงุนููุฉ. |
| **Tailwind** | ุงูุชูุณูู ูุงูุฃููุงู | ุฃุณุฑุน ูู ุงููุชุงุจุฉ ูุชุถูู ุดููุงู ูุชูุงุณูุงู. |
| **Node.js** | ุงูุณูุฑูุฑ | ูุบุฉ ูุงุญุฏุฉ (JS) ูููุงุฌูุฉ ูุงูุณูุฑูุฑุ ููุง ูุณูู ุงูุชุทููุฑ. |
| **Prisma** | ูุงุนุฏุฉ ุงูุจูุงูุงุช | ุชููุน ุฃุฎุทุงุก ุงููุชุงุจุฉ ูุชุณูู ุงูุชุนุงูู ูุน ุงูุจูุงูุงุช ุงููุนูุฏุฉ. |
| **Socket.io** | ุงูุชุญุฏูุซ ุงูููุฑู | ุถุฑูุฑูุฉ ููุธุงู ุญุถูุฑ ูุนุงู ููุญุธู. |
| **Zod** | ุงูุชุญูู ูู ุงูุจูุงูุงุช | ุชููุน ุฅุฑุณุงู ุจูุงูุงุช ุฎุงุทุฆุฉ ููุณูุฑูุฑ. |

ูุฐุง ุงููุดุฑูุน ููุซู ุฃุญุฏุซ ูุง ุชูุตูุช ุฅููู ุชูููุงุช ุงูููุจ ุงูุญุฏูุซุฉุ ููู ูุจูู ููููู ูุงุจูุงู ููุชูุณุน (Scalable) ูุขููุงู (Secure). ๐
